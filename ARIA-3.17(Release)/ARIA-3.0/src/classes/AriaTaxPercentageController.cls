public with sharing class AriaTaxPercentageController {
    public String activeTab {get;set;}
    public String tabName {get;set;}
    public boolean refreshFromAria{get;set;}
    
	ApexPages.StandardSetController setCon{get;set;}
	public Integer pageNo{get;set;}
    public Integer totalNoOfPage{get;set;}
    public Integer totalNoOfPlans{get;set;}
    public Integer planPageSize{get;set;}
    public list<Aria_Items__c> itemsToDisplay {get;set;}    
    public list<Client_Plan__c> plansToDisplay {get;set;}
    public Integer pageNumber {
		get {
			return setCon.getPageNumber();
		}
		set;
	}
	
    public AriaTaxPercentageController(){
    	refreshFromAria = AriaCustomSettingUtil.getSyncAriaTransactionToSfdcObjects();
    	init();        
    }
   public PageReference init(){
   	list<Client_Plan__c> clientPlans = new list<Client_Plan__c>();
	list<Aria_Items__c> ariaItems = new list<Aria_Items__c>();
   	if(tabName == null){
    		tabName ='planTab';	
    	}
    	
    	pageNo =1;
		totalNoOfPage = 0;
		totalNoOfPlans = 0;
		planPageSize = AriaUtil.getConfigPageSize();
		if(tabName == 'otpTab'){
			ariaItems = [select id,Client_SKU__c,Aria_Id__c,TaxPercentage__c from Aria_Items__c where status__c ='Active'];
			setCon = new ApexPages.StandardSetController(ariaItems);
		}else{
			clientPlans = [select id,Aria_Id__c,Name,TaxPercentage__c,RecordType.Name  from Client_Plan__c where status__c='Active' order by Name asc];	
			setCon = new ApexPages.StandardSetController(clientPlans);
		}
		
	    
		setCon.setPageSize(planPageSize);
		totalNoOfPlans = setCon.getResultSize() ; 
        totalNoOfPage= totalNoOfPlans / planPageSize;
        if(math.mod(totalNoOfPlans, planPageSize) > 0 || totalNoOfPage==0){
            totalNoOfPage++;
        }
        
        if(tabName == 'otpTab'){
        	itemsToDisplay = setCon.getRecords();	
        }else{
        	plansToDisplay = setCon.getRecords();	
        }
        return null;
   }
		
    public void nextPlans(){
    	setCon.save();
        setCon.next();
        if(tabName == 'otpTab'){
        	itemsToDisplay = setCon.getRecords();
        }else{
        	plansToDisplay = setCon.getRecords();	
        }
        
        if(pageNo<totalNoOfPage){
            pageNo++;
        }
    }
    public void previousPlans(){
    	setCon.save();
        setCon.previous();
        if(tabName == 'otpTab'){
        	itemsToDisplay = setCon.getRecords();
        }else{
        	plansToDisplay = setCon.getRecords();	
        }
        if(pageNo>1){
            pageNo--;
        }
    }
    public void firstPlans(){
    	setCon.save();
        pageNo=1;
        setCon.first();
       if(tabName == 'otpTab'){
        	itemsToDisplay = setCon.getRecords();
        }else{
        	plansToDisplay = setCon.getRecords();	
        }
    } 
    public void lastPlans(){
    	setCon.save();
        setCon.last();
        pageNo=totalNoOfPage;
        if(tabName == 'otpTab'){
        	itemsToDisplay = setCon.getRecords();
        }else{
        	plansToDisplay = setCon.getRecords();	
        }
    }
	public void saveData(){ 
		if(tabName == 'otpTab'){
			if(itemsToDisplay != null && !itemsToDisplay.isEmpty()){
				update itemsToDisplay;
			}
		}else{
			if(plansToDisplay != null && !plansToDisplay.isEmpty()){
				update plansToDisplay;
			}
		}
	}
	public static void testcoverage(){ 
        	integer i = 0;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        	i++;
        } 
}