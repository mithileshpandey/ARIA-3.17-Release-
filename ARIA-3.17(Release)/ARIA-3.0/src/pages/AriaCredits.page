<apex:page standardController="Account" id="pg" showheader="false" extensions="AriaCreditsExtension">
<apex:stylesheet value="{!URLFOR($Resource.Sim_JS, 'collapse.css')}" /> 
<apex:includeScript value="{!URLFOR($Resource.Sim_JS, 'jquery.min.js')}"/>

<script> 
    
   
    function showPopUp(id){
        var popupTop = 0,popupLeft = 0;
        var height = $("#"+id).height();
        var aTop = $('#a_'+id).offset().top;
        var aLeft = $('#a_'+id).offset().left;
        popupLeft = aLeft - 210;
        popupTop = (aTop +10) - height;
        $('#'+id).css({left:popupLeft,top:popupTop});
         
     }
    function showTooltip(id, title,appliedCredtis,leftCredits,firstCreditDate,credit_interval_months,planName,serviceName,altServiceName)
    {
     var div = document.getElementById(id);
     var bodyhtml = '';
     var totalCredits = eval(appliedCredtis) + eval(leftCredits);
     if(totalCredits > 1){
        //bodyhtml = '<li>'+totalCredits +' credits to be created</li>';
        bodyhtml = '<li>'+totalCredits +' '+{!$Label.ARIA_CREDIT_CREDITS_TO_BE_CREATED}+ '</li>';
     }
     else if(totalCredits > 0){
        //bodyhtml = '<li>'+totalCredits +' credit to be created</li>'
        bodyhtml = '<li>'+totalCredits +' '+{!$Label.ARIA_CREDIT_CREDITS_TO_BE_CREATED}+ '</li>';;
     }
     if(eval(appliedCredtis)>1){
        //bodyhtml+= '<li>'+appliedCredtis+' credits created ';
        bodyhtml+= '<li>'+appliedCredtis+' '+{!$Label.ARIA_CREDIT_CREDITS_CREATED};
        if(eval(leftCredits) > 1){
            //bodyhtml+=leftCredits+' credits remaining</li>';
            bodyhtml+=leftCredits+' '+{!$Label.ARIA_CREDIT_CREDITS_REMAINING}+'</li>';
        }
        else if(eval(leftCredits) >= 0){
            //bodyhtml+=leftCredits+' credit remaining</li>';
            bodyhtml+=leftCredits+' '+{!$Label.ARIA_CREDIT_CREDITS_REMAINING}+'</li>';
        }
       
     }
     else if(eval(appliedCredtis)>=0){
        //bodyhtml+= '<li>'+appliedCredtis+' credit created ';
        bodyhtml+= '<li>'+appliedCredtis+' '+{!$Label.ARIA_CREDIT_CREDITS_CREATED};
        if(eval(leftCredits) > 1){
            //bodyhtml+=leftCredits+' credits remaining</li>';
            bodyhtml+=leftCredits+' '+{!$Label.ARIA_CREDIT_CREDITS_REMAINING}+'</li>';
        }
        else if(eval(leftCredits) >= 0){
            bodyhtml+=leftCredits+' '+ {!$Label.ARIA_CREDIT_CREDITS_REMAINING}+'</li>';
        }
     }
     if(firstCreditDate!=''){
        bodyhtml += '<li>'+{!$Label.ARIA_CREDIT_FIRST_CREDIT_ON}+' '+firstCreditDate+'</li>';
     }
     if(credit_interval_months!='' && eval(leftCredits)>0){
        bodyhtml += '<li>'+credit_interval_months +' '+{!$Label.ARIA_CREDIT_MONTHS_BETWEEN_CREDITS}+'</li>';
     }
     if(planName == ''){
        bodyhtml += '<li>'+{!$Label.ARIA_CREDIT_OFFSET_ANY_CHARGE}+'</li>';
     }
     else{
        bodyhtml += '<li>'+{!$Label.ARIA_CREDIT_OFFSET_ONLY_CHARGES}+' '+planName+', '+{!$Label.ARIA_CREDIT_SERVICE};
        if(serviceName!=''){
            bodyhtml += serviceName+'</li>';
        }
     }
     
     if(altServiceName!=''){
        bodyhtml += '<li>'+{!$Label.ARIA_CREDIT_USE_ALTERNATE_SERVICE_CODE}+' '+altServiceName+{!$Label.ARIA_CREDIT_ON_APPLICATION}+'</li>';
     }
     else{
        bodyhtml += '<li>'+{!$Label.ARIA_CREDIT_USE_SYSTEM_STANDARD_SERVICE}+'</li>';
     }
     if(bodyhtml!=''){
        bodyhtml = '<ul style="margin-left: -10px;">'+bodyhtml+'</ul>';
     }
     div.innerHTML = '<div class="tooltipHeader">' + title + '</div><div class="tooltipContent">' + bodyhtml + '</div>';
     showPopUp(id);
     div.style.display='';
   }
    
    function showTooltip1(id, title, desc)
    {
     var div = document.getElementById(id);
     div.style.display = 'inline';
     var newstring = desc.replace(/[\,]/g, "<br/>")
     div.innerHTML = '<div class="tooltipHeader">' + title + '</div><div class="tooltipContent">' + desc + '</div>';
    } 
    function hideTooltip(id)
    {
     var div = document.getElementById(id);
     div.style.display = 'none';
}
    function ToggleBilling(optn){
        if(optn == 'Alternate'){
            $(".billing").show();
        }else{
            $(".billing").hide();
        }
    }
    
    function ToggleCardInfo(optn){
        if(optn == 'CA'){
            $(".Checking").show();
            $(".credit").hide();
        }else{
            $(".Checking").hide();
            $(".credit").show();
        }
    }
    
    function TogglePayment(optn){
        if(optn == 'OtherAmount'){
            $(".otherPayment").show();
        }else{
            $(".otherPayment").hide();
        }
    }
    
     function isNumberKey(evt, val)
      {
         var charCode = (evt.which) ? evt.which : event.keyCode
         if (charCode == 46) {
            // Allow only 1 decimal point ('.')...
            if((val) && (val.indexOf('.') >= 0))
                return false;
            else
                return true;
         }
         
         if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
 
         return true;
      }
      
      
      function twoDecimalPlaces(obj){
        var decimalVal = obj.value.split('.');
         if(decimalVal.length > 1 && decimalVal[1].length > 2){
            obj.value = obj.value.substring(0,obj.value.length -1);
         }
      }

    function closeWin(){
         var aid = window.parent.location.href.split('id=')[1];
         aid = aid.split('&')[0];
         //alert(window.opener.location.href);
         window.opener.parent.location.href = 'https://'+document.domain+'/'+aid.trim();
         //window.parent.opener.location.reload(true);
         self.close();
         //window.opener.location = self;
        //opener.location.reload();
        //window.close();
    }
    
    //-------------------------------------------
   // Function to only allow decimal data entry
   //-------------------------------------------
   function jsDecimals(e)
   {
      var evt = (e) ? e : window.event;
      var key = (evt.keyCode) ? evt.keyCode : evt.which;
      if(key != null) 
      {
          key = parseInt(key, 10);
          if((key < 48 || key > 57) && (key < 96 || key > 105)) 
          {
              if(!jsIsUserFriendlyChar(key, "Decimals"))
              {
                  return false;
              }
          }
          else 
          {
              if(evt.shiftKey)
              {
                  return false;
              }
          }
      }
      return true;
   }        
   
   //------------------------------------------
   // Function to check for user friendly keys
   //------------------------------------------
   function jsIsUserFriendlyChar(val, step) 
   {
      // Backspace, Tab, Enter, Insert, and Delete
      if(val == 8 || val == 9 || val == 13 || val == 45 || val == 46)
      {
          return true;
      }
      // Ctrl, Alt, CapsLock, Home, End, and Arrows
      if((val > 16 && val < 21) || (val > 34 && val < 41))
      {
          return true;
      }
      if (step == "Decimals")
      {
          if(val == 190 || val == 110)
          {
              return true;
          }
      }
      // The rest
      return false;
   }
   
   function verifyInput(){
       $(".errorMsg").hide();
       if($(".refCode").val().length == 0){
           $(".errorMsg").show();
        
       }else{
       
           save_record();
       }
      
   }   
   
   function setBackgroundColor(tdId,transactionId,voidtransactionId,creditype){
    var td = document.getElementById(tdId);
    if(td){
         var tr = td.parentNode;
         if(transactionId!= '' && voidtransactionId!='' && creditype=='C'){
            tr.style.background = "#FFE7C3";
         }
    }
    }    
   
</script>

<style>
    .toolTipWrapper{
            background: #EAF3F2;
            color: #000;
            width: 205px;
            position: absolute;
            z-index: 98;
            } 
        .tooltipHeader{
            background: #000080;
            color: #fff;
            padding: 2px;
            width: 100%;
            border: solid 1px #333;
            font-size: 10px;
         } 
         .tooltipContent{
            background: #fff;
            color: #111010;
            padding: 2px;
            width: 100%;
            font-size: 11px;
            border: solid 1px #333;
        } 
    .Checking PA{
        display:none;
    }
    
    .header{
        text-align:right;
    }
    .footerclass{
        text-align:center;
        font-style:italic;
       // background-color: gray;
    }
    
  
#tabs_wrapper {
    width: 98%;
    margin:0 auto;
    margin-top :2px;
}
#tabs_container {
    border-bottom: 1px solid #ccc;
    
}
#tabs {
    list-style: none;
    padding: 5px 0 4px 0;
    margin: 0 0 0 20px;
    font: 0.90em arial;
}
#tabs li {
    display: inline;
}
#tabs li a {
    border: 1px solid #ccc;
    padding: 4px 6px;
    text-decoration: none;
    background-color: #eeeeee;
    border-bottom: none;
    outline: none;
    border-radius: 5px 5px 0 0;
    -moz-border-radius: 5px 5px 0 0;
    -webkit-border-top-left-radius: 5px;
    -webkit-border-top-right-radius: 5px;
    color:#000;
}
#tabs li a:hover {
    background-color: #dddddd;
    padding: 4px 6px;
}
#tabs li.active a {
    border-bottom: 1px solid #fff;
    background-color: #fff;
    padding: 4px 6px 5px 6px;
    border-bottom: none;
}
#tabs li.active a:hover {
    background-color: #eeeeee;
    padding: 4px 6px 5px 6px;
    border-bottom: none;
}
#tabs li a.icon_accept:hover {
    padding-left: 24px;
}

#tabs_content_container {
    border: 1px solid #ccc;
    border-top: none;
    padding: 10px;
    width: 98.4%;
}
ul li, ol li {
margin-left: 0em;
padding-left: 0;
}
     
</style>
  
<script>

    function checkCreditType(val) {
           
            if('Service Credit' == val){
                document.getElementById('pg:theForm:NewCredit:CreditSec').style.display="";
                document.getElementById('pg:theForm:NewCredit:CashSec').style.display="none";
            
            }else{
                document.getElementById('pg:theForm:NewCredit:CreditSec').style.display="none";
                document.getElementById('pg:theForm:NewCredit:CashSec').style.display="";
            }
    }
    
    document.getElementById('pg:theForm:NewCredit:CashSec').style.display="none";
</script>
 <apex:actionstatus id="status">
    <apex:facet name="start">
        <div class="waitingSearchDiv" id="el_loading" style="background-color: #fff;position:absolute;min-height: 100%;width:100%;padding-top: 10%;opacity:.8;">
            <img src="{!URLFOR($Resource.LodingGif)}" title="Please Wait..." /><br/><br/>
            <span class="waitingDescription" style="color: #6B3;">{!$Label.ARIA_GENERAL_CONFIG_LOADING}</span>
        </div>
    </apex:facet>
</apex:actionstatus>
<apex:form id="theForm">
<apex:pageMessages escape="false"></apex:pageMessages>
<div id="tabs_wrapper">
    <div id="tabs_container">
        <ul id="tabs">
            <li ><a href="/apex/AriaPaymentsandCredits?id={!AccId}"><b>{!$Label.ARIA_PAYMENT_CREDIT_PAYMENTS}</b></a></li>
            <li><a href="/apex/AriaRefunds?id={!AccId}"><b>{!$Label.ARIA_PAYMENT_CREDIT_REFUNDS}</b></a></li>
            <li class="active"><a href="#"><b>{!$Label.ARIA_PAYMENT_CREDIT_CREDITS}</b></a></li>
            <li><a href="/apex/AriaDispute_Write_Offs?id={!AccId}"><b>{!$Label.ARIA_PAYMENT_CREDIT_WRITE_OFF}</b></a></li>
<!--             <li><a href="/apex/AriaReversal?id={!AccId}"><b>{!$Label.ARIA_PAYMENT_CREDIT_REVERSAL}</b></a></li> -->
        </ul>
    </div>
    <div id="" >
   
         <!-- apex action functions for paginations -->
          <apex:actionFunction id="aFunction2" name="firstPage" action="{!firstBtnClick}" reRender="theForm" status="status" />
          <apex:actionFunction id="aFunction3" name="prePage" action="{!previousBtnClick}" reRender="theForm" status="status" />
          <apex:actionFunction id="aFunction4" name="nextPage" action="{!nextBtnClick}" reRender="theForm" status="status" />
          <apex:actionFunction id="aFunction5" name="lastPage" action="{!lastBtnClick}" reRender="theForm" status="status" />
          <!--<apex:actionFunction id="complete_void_transaction" name="complete_void_transaction" action="{!void_transaction}" rerender="theForm" status="status"/>-->
          <apex:actionFunction id="aFunction6" name="setPageSize" reRender="theForm" status="status" >
                <apex:param name="pSize" value="" assignTo="{!PageSize}"/>
          </apex:actionFunction>
          <!-- apex action functions for paginations ends-->
         <apex:actionFunction id="refPage" name="refresh" action="{!refreshPage}" reRender="theForm" status="status" />
         <apex:actionFunction name="refresh_creditDetail" action="{!get_account_credits_Details}" reRender="ariaPayHisblock" status="status" />
         <apex:actionFunction name="refresh_creditInfoDetail" action="{!ViewRecurringCredits}" reRender="ariaRecurringBlock" status="status" />
                   
         
         <apex:commandButton value="{!$Label.ARIA_CREDIT_VIEW_RECURRING_CREDITS}" rendered="{!!showRecCredits}" action="{!ViewRecurringCredits}" reRender="theForm" status="status" style="margin-left: 42%;"/>
         <apex:commandButton value="{!$Label.ARIA_CREDIT_VIEW_VIEW_CREDITS}" rendered="{!showRecCredits}" action="{!ViewCredits}" reRender="theForm" status="status" style="margin-left: 42%;"/>
        
         <apex:pageBlock id="NewCredit" rendered="{!!viewSummary}" >
            <apex:outputPanel layout="block" style="background-color:hsl(195, 61%, 88%)">
                      <ul>
                      <apex:outputLabel escape="false" value="{!$Label.ARIA_CREDIT_HEADER}"></apex:outputLabel>
                      
                        </ul>
               </apex:outputPanel>
               
               <apex:pageBlockSection columns="1" collapsible="false">
	               <apex:pageBlockSectionItem >
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_TYPE}</apex:outputLabel>
                       <apex:outputPanel ><apex:selectRadio value="{!creditType}" onchange="if(this.value=='Service Credit'){ToggleView('pg:theForm:NewCredit:CreditSec','pg:theForm:NewCredit:CashSec');}else{ToggleView('pg:theForm:NewCredit:CashSec','pg:theForm:NewCredit:CreditSec');}">
                           <apex:selectOption itemLabel="{!$Label.ARIA_REFUND_SERVICE_CREDIT}" itemValue="Service Credit" itemDisabled="{!showServiceCredit}"></apex:selectOption>
                           <apex:selectOption itemLabel="{!$Label.ARIA_REFUND_CASH_CREDIT}" rendered="{!!showRecCredits}" itemValue="Cash Credit" itemDisabled="{!showCashCredit}"></apex:selectOption>
                       </apex:selectRadio></apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   
                   <apex:pageBlockSectionItem rendered="{!!(showCashCredit && showServiceCredit)}">
                       <apex:outputLabel >{!$Label.ARIA_ACCOUNT_DETAIL_SUBSCRIPTION_ID}</apex:outputLabel>
                       <apex:outputPanel >
	                       <apex:selectList value="{!selectedSubscriptionIdForCreateCredit}" size="1" onchange="refresh_creditDetail()">
					            <apex:selectOptions value="{!subscriptionList}"/>
					        </apex:selectList>
                       </apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   
                   <apex:pageBlockSectionItem rendered="{!!(showCashCredit && showServiceCredit)}">
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_AMOUNT}</apex:outputLabel>
                       <apex:outputPanel layout="block" styleClass="requiredInput">
                       <!--<apex:outputPanel layout="block" styleClass="requiredBlock"></apex:outputPanel>-->
                       {!acctCurrency}&nbsp;&nbsp;
                       <apex:inputText value="{!creditAmount}" style="width: 150px;text-align:right;" onkeyup="twoDecimalPlaces(this)" onkeypress="return isNumberKey(event, this.value);" />
                       <!--<div class="errorMsg" style="display:none;"><strong>Error:</strong> Credit Amount can not be blank or zero.</div>-->
                       </apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   
                    <apex:pageBlockSectionItem rendered="{!!(showCashCredit && showServiceCredit)}">
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_CREDIT_REASON}</apex:outputLabel>
                       <apex:outputPanel >
                        <apex:selectList value="{!creditReason}" size="1" >
                           <apex:selectOptions value="{!credit_reasons}"></apex:selectOptions>
                       </apex:selectList>
                       </apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem rendered="{!!(showCashCredit && showServiceCredit)}">
                       <apex:outputLabel >{!$Label.ARIA_PAYMENT_CREDIT_CSR_COMMENTS}</apex:outputLabel>
                       <apex:outputPanel ><apex:inputTextarea value="{!comments}" rows="5" cols="110" /></apex:outputPanel>
                   </apex:pageBlockSectionItem>
                  </apex:pageBlockSection>
                   
                  <apex:pageBlockSection columns="1" collapsible="false" id="CreditSec" rendered="{!!showServiceCredit}">
                       <apex:pageBlockSectionItem >
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_INITIAL_CREDIT_DATE}</apex:outputLabel>
                       <apex:outputPanel ><apex:inputField value="{!cont.Start_Date__c}" style="width: 200px;"/></apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   
                    <apex:pageBlockSectionItem rendered="{!!showServiceCredit}">
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_WHEN_TO_APPLY}</apex:outputLabel>
                       <apex:outputPanel >
                       <apex:selectRadio value="{!whenToapply}" onchange="showWhenToApplyBlock(this.value);">
                           <apex:selectOption itemLabel="{!$Label.ARIA_REFUND_AGAINST_ANY_CHARGE}" itemValue="Against any charge"></apex:selectOption>
                           <apex:selectOption itemLabel="{!$Label.ARIA_REFUND_AGAINST_A_SPECIFIC_TYPE}" itemValue="Against a specific type of charge"></apex:selectOption>
                           <apex:selectOption itemLabel="{!$Label.ARIA_REFUND_AGAINST_A_SPECIFIC_SERVICE_TYPE}" itemValue="Against a specific service type of charge"></apex:selectOption>
                       </apex:selectRadio>
                       <div id="chargeDiv" style="{!IF(whenToapply!='Against a specific type of charge','display:none','')}">
                       <apex:outputLabel style="font-weight:bold;">{!$Label.ARIA_DISPUTE_SERVICE_PLAN}:</apex:outputLabel>
                       <br/>
                       <apex:selectList value="{!planId}" size="1" onchange="showService('chargeDiv1',this.value);">
                           <apex:selectOptions value="{!accountplans}"></apex:selectOptions>
                       </apex:selectList>
                       <br/>
                       <div id="chargeDiv1" style="{!IF(whenToapply!='Against a specific type of charge','display:none','')}">
                       <!-- <apex:outputLabel ><b>Service Code:</b> (leave blank to allow credit to apply against any services under this plan)</apex:outputLabel> -->
                       <apex:outputLabel escape="false" value="{!$Label.ARIA_CREDIT_SERVICE_CODE_LEAVE_BLANK}"></apex:outputLabel>
                       <apex:selectList value="{!serviceId}" size="1" >
                           <apex:selectOptions value="{!PlanServices}"></apex:selectOptions>
                       </apex:selectList>
                       </div>
                       </div>
                       
                       <div id="chargeDiv2" style="{!IF(whenToapply!='Against a specific service type of charge','display:none','')}">
                       <apex:outputLabel style="font-weight:bold;">Eligible Service Types:</apex:outputLabel>
                       <br/>
                       	<apex:selectCheckboxes value="{!serviceTypeSelections}" layout="pageDirection">
						    <apex:selectOptions value="{!serviceTypeCheckboxes}"></apex:selectOptions>
						</apex:selectCheckboxes>
                       <br/>
                       
                       </div>
                       
                       
                       </apex:outputPanel>
                   </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!!showServiceCredit}">
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_SERVICE_CODE}</apex:outputLabel>
                       <apex:outputPanel >
                       <apex:selectRadio value="{!serviceCodeToUse}" onchange="showBlock('serviceDiv','Alternative',this.value);">
                           <apex:selectOption itemLabel="{!$Label.ARIA_CREDIT_STANDARD}" itemValue="Standard"></apex:selectOption>
                           <apex:selectOption itemLabel="{!$Label.ARIA_CREDIT_ALTERNATIVE}" itemValue="Alternative"></apex:selectOption>
                           <!-- <apex:selectOption itemLabel="Same as the 'charge' line item" itemValue="Same as the 'charge' line item"></apex:selectOption>-->
                       </apex:selectRadio>
                       <div id="serviceDiv" style="{!IF(serviceCodeToUse!='Alternative','display:none','')}">
                               <apex:outputLabel style="font-weight:bold;">Alternative Code:</apex:outputLabel>
                               <br/>
                               <apex:selectList value="{!altserviceId}" size="1" >
                                   <apex:selectOptions value="{!allServiesOptions}"></apex:selectOptions>
                               </apex:selectList>
                       </div>
                       </apex:outputPanel>
                   </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!!showServiceCredit}">
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_GENERATION_FREQ}</apex:outputLabel>
                       <apex:outputPanel >
                           <apex:selectRadio value="{!frequency}" onchange="showBlock('freqDiv','Multiple',this.value);">
                               <apex:selectOption itemLabel="{!$Label.ARIA_REFUND_ONCE}" itemValue="Once"></apex:selectOption>
                               <apex:selectOption itemLabel="{!$Label.ARIA_REFUND_MULTIPLE}" itemValue="Multiple"></apex:selectOption>
                           </apex:selectRadio>
                            <div id="freqDiv" style="{!IF(frequency!='Multiple','display:none','')}">
                               <apex:outputLabel style="font-weight:bold;">{!$Label.ARIA_CREDIT_NUMBER_OF_CREDITS}:</apex:outputLabel>
                               <br/>
                               <apex:selectList value="{!noOfCredits}" size="1" >
                                    <apex:selectOptions value="{!numCreditsOptions}"></apex:selectOptions>
                               </apex:selectList>
                               <br/>
                               <apex:outputLabel style="font-weight:bold;">{!$Label.ARIA_CREDIT_MONTHS_BETWEEN_CREDITS}:</apex:outputLabel>
                               <br/>
                               <apex:selectList value="{!monBtwCredits}" size="1" >
                                    <apex:selectOptions value="{!monthsOptions}"></apex:selectOptions>
                               </apex:selectList>
                            </div>
                       </apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   </apex:pageBlockSection>
                   <apex:pageBlockSection columns="1" collapsible="false" id="CashSec">
                   <apex:pageBlockSectionItem rendered="{!!showCashCredit}">
                       <apex:outputLabel >{!$Label.ARIA_PAYMENT_CREDIT_APPLICATION_METHOD}</apex:outputLabel>
                       <apex:outputPanel >
                       <apex:selectRadio value="{!applyMethod}" layout="pageDirection">
                           <apex:selectOption itemLabel="{!$Label.ARIA_REFUND_AGAINST_TO_CHARGES_PER_STANDARD}" itemValue="FIFO"></apex:selectOption>
                           <!-- <apex:selectOption itemLabel="Apply to specific unpaid charges" itemValue="specific_unpaid_charges"></apex:selectOption>-->
                       </apex:selectRadio>
                      </apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   </apex:pageBlockSection>
                   <apex:pageBlockSection columns="1" collapsible="false">
                  
                   <apex:pageBlockSectionItem rendered="{!if(showCashCredit == true && showServiceCredit ==true, false, true)}">
                     <apex:outputLabel ></apex:outputLabel>
                     <apex:outputPanel layout="block" style="text-align: right;padding-right: 1%;">
                            <apex:commandButton value="{!$Label.ARIA_CREDIT_CREDIT_CREATE_CREDIT}"  status="status" action="{!view_summary}" reRender="theForm" />
                            <apex:commandButton value="{!$Label.ARIA_PAYMENT_CREDIT_CLOSE}" style="margin-left:10px;" onclick="return closeWin();"/>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
               </apex:pageBlockSection>
          </apex:pageBlock>
          
          
          <apex:pageBlock id="pb_void_cashcredit"  title="Void Cash Transaction" rendered="{!isVoidCashCredit}">
            <apex:pageBlockSection id="pbs_void_cashcredit"  columns="1" collapsible="false">
                <apex:pageBlockSectionItem >
                   <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_TYPE}</apex:outputLabel>
                   <apex:outputLabel >{!If(cashCreditToBeVoided.credit_type='C','Cash','Cash')}</apex:outputLabel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                   <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_CREDIT_NO}</apex:outputLabel>
                   <apex:outputLabel >{!cashCreditToBeVoided.credit_no}</apex:outputLabel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                   <apex:outputLabel >{!$Label.ARIA_PAYMENT_CREDIT_AMOUNT}:</apex:outputLabel>
                   <apex:outputText value="{0, number, 0.00}"  style="text-align:right;" >
                       <apex:param value="{!cashCreditToBeVoided.amount}" />
                    </apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                   <apex:outputLabel >{!$Label.ARIA_PAYMENT_CREDIT_REASON}:</apex:outputLabel>
                   <apex:outputPanel layout="block" styleClass="requiredInput">
                         <apex:outputPanel layout="block" styleClass="requiredBlock"></apex:outputPanel>
                         <apex:selectList value="{!void_reason}" size="1"><!--  required="true" label="Reason" >-->
                           <apex:selectOptions value="{!void_reasons}"></apex:selectOptions>
                         </apex:selectList>
                  </apex:outputPanel>
                   
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                   <apex:outputLabel >{!$Label.ARIA_PAYMENT_CREDIT_CSR_COMMENTS}</apex:outputLabel>
                   <apex:outputPanel layout="block" styleClass="requiredInput">
                    <apex:outputPanel layout="block" styleClass="requiredBlock"></apex:outputPanel>
                    <apex:inputTextarea value="{!void_comments}" rows="6" cols="90"/><!-- required="true" label="CSR Comments" />-->
                   </apex:outputPanel>
                </apex:pageBlockSectionItem>
                 <apex:outputPanel layout="block" style="float:right;">
                    <apex:commandButton value="{!$Label.ARIA_PLAN_VIEW_CANCEL}" immediate="true" action="{!cancel_void_cashCredit}" reRender="theForm" status="status"/>&nbsp;&nbsp;&nbsp;&nbsp;
                    <apex:commandButton value="{!$Label.ARIA_CREDIT_VOID_CREDIT}" action="{!validate_void_transaction}" rerender="theForm" status="status"/>
                </apex:outputPanel>
             </apex:pageBlockSection>
        </apex:pageBlock>
        
        
                    
          
          <!-- Credit Summary Block -->
          <apex:pageBlock id="creditSummaryBlock" rendered="{!viewSummary && !isVoidCashCredit}">
            <apex:outputPanel layout="block" style="background-color:hsl(195, 61%, 88%);height:20px;">
            <ul>
              <apex:outputLabel escape="false" value="{!$Label.ARIA_CREDIT_CONFIRM_ENTRIES_CREATE_CREDIT}"></apex:outputLabel>
              
           </ul>
           </apex:outputPanel>
            <apex:pageBlockSection columns="1" collapsible="false">
                   <apex:pageBlockSectionItem >
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_AMOUNT}</apex:outputLabel>
                       <apex:outputPanel >
                            <apex:outputText value="{!acctCurrency} {0, number, 0.00}"  style="text-align:right;" >
                                <apex:param value="{!VALUE(creditAmount)}" />
                            </apex:outputText>
                       <!--  <apex:outputText value="usd$ 12.00" style="width: 200px;" />-->
                       </apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_TYPE}</apex:outputLabel>
                       <apex:outputPanel >
                            <apex:outputText value="{!sum_creditType}" style="width: 200px;"/>
                                
                       </apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_CREDIT_REASON}</apex:outputLabel>
                       <apex:outputPanel > <apex:outputText value="{!sum_creditReason}" style="width: 200px;" /></apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                       <apex:outputLabel >{!$Label.ARIA_PAYMENT_CREDIT_CSR_COMMENTS}</apex:outputLabel>
                       <apex:outputPanel > <apex:outputText value="{!sum_comments}" style="width: 200px;" /></apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem rendered="{!creditType='Service Credit'}" >
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_INITIAL_CREDIT_DATE}</apex:outputLabel>
                       <apex:outputPanel >
                           <apex:outputText value="{!sum_date}"  style="width: 200px;" />
                        <!--<apex:outputText value="{0,date,MM/dd/yyyy}"  style="width: 200px;" >
                         <apex:param value="{!cont.Start_Date__c}" />
                       </apex:outputText>-->
                       </apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem rendered="{!creditType='Service Credit'}">
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_WHEN_TO_APPLY}</apex:outputLabel>
                       <apex:outputPanel > <apex:outputText value="{!sum_whenToapply}" style="width: 200px;" /></apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem rendered="{!creditType='Service Credit'}">
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_SERVICE_CODE}</apex:outputLabel>
                       <apex:outputPanel > <apex:outputText value="{!sum_serCodeToUse}" style="width: 200px;" /></apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem rendered="{!creditType='Service Credit'}">
                       <apex:outputLabel >{!$Label.ARIA_CREDIT_CREDIT_GENERATION_FREQ}</apex:outputLabel>
                       <apex:outputPanel > <apex:outputText value="{!sum_frequency}" style="width: 200px;" /></apex:outputPanel>
                   </apex:pageBlockSectionItem> 
                   <apex:pageBlockSectionItem rendered="{!creditType='Cash Credit'}">
                       <apex:outputLabel >{!$Label.ARIA_PAYMENT_CREDIT_APPLICATION_METHOD}</apex:outputLabel>
                       <apex:outputPanel > <apex:outputText value="{!applyMethod} {!$Label.ARIA_PAYMENT_CREDIT_METHOD}" style="width: 200px;" /></apex:outputPanel>
                   </apex:pageBlockSectionItem>
                   <apex:pageBlockSectionItem >
                     <apex:outputLabel ></apex:outputLabel>
                     <apex:outputPanel layout="block" style="text-align: right;padding-right: 1%;">
                            <apex:commandButton value="{!$Label.ARIA_CREDIT_CREDIT_CREATE_CREDIT}" action="{!create_credit}"  status="status" reRender="theForm" />
                            <apex:commandButton value="{!$Label.ARIA_DISPUTE_BACK}" action="{!go_back}"  status="status" reRender="theForm" style="margin-left:10px;"/>
                            <apex:commandButton value="{!$Label.ARIA_PLAN_VIEW_CANCEL}" action="{!cancel_summary}" status="status" reRender="theForm" style="margin-left:10px;"/>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
               </apex:pageBlockSection>
          </apex:pageBlock>
          
          
          
    <!--  credit history code below in seperate pageBlock -->
        <apex:pageBlock id="ariaPayHisblock" rendered="{!!showRecCredits}" title="{!$Label.ARIA_CREDIT_CREDIT_HISTORY}">
        <div style="float:right">
	        <apex:outputLabel value="{!$Label.ARIA_PLAN_QUOTE_SUBSCRIPTIONS}" />&nbsp;&nbsp;&nbsp;&nbsp;
	        <apex:selectList value="{!selectedSubscriptionId}" size="1" onchange="refresh_creditDetail()">
	            <apex:selectOptions value="{!subscriptionList1}"/>
	        </apex:selectList>
        </div>
        <br />
        <apex:outputPanel layout="block" style="background-color:hsl(195, 61%, 88%)">
            <ul>
               <li>{!$Label.ARIA_CREDIT_CREDIT_CURRENT_TOTAL} 
                    <apex:outputText value="{0, number, 0.00}"  style="text-align:right;" >
                       <apex:param value="{!total_unapplied_amount}" />
                      </apex:outputText>.
               </li>
               <apex:outputLabel escape="false" value="{!$Label.ARIA_CREDIT_CREDIT_DISABLE_INCOMPLETE_SERVICE}"></apex:outputLabel>
               
           </ul>
        </apex:outputPanel>
        <div class="paginator">
      <span class="left">
         <span onmouseout="ListPaginator.unhoverSelector(this)" onmouseover="ListPaginator.hoverSelector(this)" onmousedown="ListPaginator.showSelector('item_paginator_rpp_target')" id="item_paginator_rpp_target" class="selectorTarget">
            {!start}-{!ends} of {!totalRecords}
            <table cellspacing="0" cellpadding="0" id="item_paginator_rpp" class="selector rpp">
                <tbody>
                <tr onmousedown="setPageSize(10);" onmouseout="Sfdc.Dom.removeClass(this, 'optHover')" onmouseover="Sfdc.Dom.addClass(this, 'optHover')" class="opt {!IF(pageSize=10,'optSelected','optUnselected')}">
                    <td>{!$Label.ARIA_PAYMENT_REFUND_DISPLAY}</td>    <td class="rppOpt">10</td>  <td>{!$Label.ARIA_PAYMENT_CREDIT_RECORDS_PER_PAGE}</td>
                </tr>
                <tr onmousedown="setPageSize(25);" onmouseout="Sfdc.Dom.removeClass(this, 'optHover')" onmouseover="Sfdc.Dom.addClass(this, 'optHover')" class="opt {!IF(pageSize=25,'optSelected','optUnselected')}">
                    <td>{!$Label.ARIA_PAYMENT_REFUND_DISPLAY}</td>    <td class="rppOpt">25</td>  <td>{!$Label.ARIA_PAYMENT_CREDIT_RECORDS_PER_PAGE}</td>
                </tr>
                <tr onmousedown="setPageSize(50);" onmouseout="Sfdc.Dom.removeClass(this, 'optHover')" onmouseover="Sfdc.Dom.addClass(this, 'optHover')" class="opt {!IF(pageSize=50,'optSelected','optUnselected')}">
                    <td>{!$Label.ARIA_PAYMENT_REFUND_DISPLAY}</td><td class="rppOpt">50</td>  <td>{!$Label.ARIA_PAYMENT_CREDIT_RECORDS_PER_PAGE}</td>
                </tr>
                <tr onmousedown="setPageSize(100);" onmouseout="Sfdc.Dom.removeClass(this, 'optHover')" onmouseover="Sfdc.Dom.addClass(this, 'optHover')" class="opt {!IF(pageSize=100,'optSelected','optUnselected')}">
                    <td>{!$Label.ARIA_PAYMENT_REFUND_DISPLAY}</td>    <td class="rppOpt">100</td> <td>{!$Label.ARIA_PAYMENT_CREDIT_RECORDS_PER_PAGE}</td>
                </tr>
                
            </tbody>
          </table>
        <img src="/s.gif" class="selectArrow" />
       </span>
          
      </span>
      <span class="prevNextLinks">
        <span class="prevNext">
            <apex:outputPanel rendered="{!!previousButtonDisabled}">
            <a href="javascript:firstPage();">
                <img class="first" alt="{!$Label.ARIA_ACCOUNT_PLAN_SELECTION_FIRST_PAGE}" title="{!$Label.ARIA_ACCOUNT_PLAN_SELECTION_FIRST_PAGE}" src="/s.gif"/>
            </a>
            </apex:outputPanel> 
            <apex:outputPanel rendered="{!previousButtonDisabled}">
            <img class="firstoff" src="/s.gif"/>
            </apex:outputPanel>
        </span>
        <span class="prevNext">
            <apex:outputPanel rendered="{!!previousButtonDisabled}">
            <a href="javascript:prePage();">
                <img class="prev" alt="{!$Label.ARIA_PAYMENT_CREDIT_PREVIOUS}" title="{!$Label.ARIA_PAYMENT_CREDIT_PREVIOUS}" src="/s.gif"/>{!$Label.ARIA_PAYMENT_CREDIT_PREVIOUS}
            </a>
            </apex:outputPanel>
            <apex:outputPanel rendered="{!previousButtonDisabled}">
            <img class="prevoff" src="/s.gif"/>{!$Label.ARIA_PAYMENT_CREDIT_PREVIOUS}
            </apex:outputPanel>
        </span>
        <span class="prevNext">
            <apex:outputPanel rendered="{!!nextButtonDisabled}">
            <a href="javascript:nextPage();">{!$Label.ARIA_PAYMENT_CREDIT_NEXT}
                <img class="next" alt="{!$Label.ARIA_PAYMENT_CREDIT_NEXT}" title="{!$Label.ARIA_PAYMENT_CREDIT_NEXT}" src="/s.gif"/>
            </a>
            </apex:outputPanel>
            <apex:outputPanel rendered="{!nextButtonDisabled}">
            {!$Label.ARIA_PAYMENT_CREDIT_NEXT}<img class="nextoff" src="/s.gif"/>
            </apex:outputPanel>
        </span>
        <span class="prevNext">
            <apex:outputPanel rendered="{!!nextButtonDisabled}">
            <a href="javascript:lastPage();">
                <img class="last" alt="{!$Label.ARIA_ACCOUNT_PLAN_SELECTION_LAST_PAGE}" title="{!$Label.ARIA_ACCOUNT_PLAN_SELECTION_LAST_PAGE}" src="/s.gif"/>
            </a>
            </apex:outputPanel>
            <apex:outputPanel rendered="{!nextButtonDisabled}">
            <img class="lastoff" src="/s.gif"/>
            </apex:outputPanel>
        </span>
     </span>
     <span class="right">{!$Label.ARIA_PAYMENT_REFUND_PAGE} {!PageNumber}&nbsp;{!$Label.ARIA_PAYMENT_CREDIT_OF}&nbsp;{!TotalPageNumber}
     <!--<input type="text" value="{!PageNumber}" onchange="jump(this.value);" maxlength="4" class="pageInput"/> of {!totalPageNumber}-->
     </span>
     </div>
             <apex:pageBlockTable columnClasses="crow" value="{!Histories}" var="t" rendered ="{!Histories!=null && Histories.Size > 0}">
                   <apex:column >
                    <apex:commandLink value="{!$Label.ARIA_GENERAL_CONFIG_DELETE}" action="{!cancel_credit}" onclick="if(!confirm('{!$Label.ARIA_PAYMENT_CREDIT_ARE_YOU_SURE}')) return false;" rendered="{!Not(t.unapplied_amount=0)}" reRender="theForm" status="status" >
                        <apex:param name="credit_no" value="{!t.credit_no}" assignTo="{!creditNumber}"/>
                    </apex:commandLink>
                    <apex:commandLink onclick="if(!confirm('{!$Label.ARIA_PAYMENT_CREDIT_ARE_YOU_SURE_TO_VOID_CREDIT}')) return false;" value="Void" action="{!void_cashCredit}" rendered="{!NOT(ISNULL(t.transaction_id)) && ISNULL(t.void_transaction_id) && IF(t.credit_type='C',true,false)}" rerender="theForm" status="status">
                        <apex:param name="transaction_id" value="{!t.transaction_id}"/>
                    </apex:commandLink>
                 </apex:column>
                  <apex:column headerValue="{!$Label.ARIA_CREDIT_CREDIT_CREDIT_NO}" value="{!t.credit_no}" headerClass="headerlbl" />
                  <apex:column headerValue="{!$Label.ARIA_PAYMENT_REFUND_CREATED_BY}" value="{!t.created_by}"  headerClass="headerlbl" />
                  <apex:column headerValue="{!$Label.ARIA_PAYMENT_REFUND_CREATED_DATE}"  value="{!t.created_date}" headerClass="headerlbl"/>
                  <apex:column headerValue="{!$Label.ARIA_CREDIT_AMT}" style="text-align:right;" headerClass="header">
                      <apex:outputText value="{0, number, 0.00}"  style="text-align:right;" >
                       <apex:param value="{!t.amount}" />
                      </apex:outputText>
                  </apex:column> 
                  <apex:column headerValue="{!$Label.ARIA_ITEM_VIEW_TYPE}" headerClass="headerlbl" > 
                    {!IF(t.credit_type='S','Service','Cash')} 
                  </apex:column>
                  <apex:column id="void" headerValue="{!$Label.ARIA_CREDIT_APPLIED_AMT}" style="text-align:right;"  headerClass="header"  >
                      <apex:outputText value="{0, number, 0.00}"  style="text-align:right;" >
                       <apex:param value="{!t.applied_amount}" />
                      </apex:outputText>
                  <script>
                    setBackgroundColor("{!$Component.void}","{!t.transaction_id}","{!t.void_transaction_id}","{!t.credit_type}");
                  </script>
                  </apex:column>
                  <apex:column headerValue="{!$Label.ARIA_CREDIT_UNAPPLIED_AMT}" style="text-align:right;"  headerClass="header"  >
                  <apex:outputText value="{0, number, 0.00}"  style="text-align:right;" >
                       <apex:param value="{!t.unapplied_amount}" />
                      </apex:outputText>
                  </apex:column>
                  <apex:column headerValue="{!$Label.ARIA_PAYMENT_CREDIT_REASON}" value="{!t.reason_text}"  headerClass="headerlbl" />
              </apex:pageBlockTable>
              <!--  In case No records Found the below pageblock table will be rendered -->
              <apex:pageBlockTable value="{!Histories}" var="t" rendered="{!Histories.Size = 0}" footerClass="footerclass" >
                 <apex:column />
                 <apex:column headerValue="{!$Label.ARIA_CREDIT_CREDIT_CREDIT_NO}" headerClass="headerlbl" styleClass="drow" width="12%"/>
                 <apex:column headerValue="{!$Label.ARIA_PAYMENT_REFUND_CREATED_BY}" width="11%" headerClass="headerlbl" styleClass="crow" />
                 <apex:column headerValue="{!$Label.ARIA_PAYMENT_REFUND_CREATED_DATE}"  width="25%" headerClass="headerlbl" styleClass="crow" />
                 <apex:column headerValue="{!$Label.ARIA_CREDIT_AMT}" width="12%" headerClass="headerlbl"  styleClass="drow" />
                 <apex:column headerValue="{!$Label.ARIA_ITEM_VIEW_TYPE}"  width="20%" headerClass="headerlbl"  styleClass="lrow" />
                 <apex:column headerValue="{!$Label.ARIA_CREDIT_APPLIED_AMT}" width="20%" headerClass="headerlbl"  styleClass="lrow" />
                 <apex:column headerValue="{!$Label.ARIA_CREDIT_UNAPPLIED_AMT}" width="20%" headerClass="headerlbl"  styleClass="lrow" />
                 <apex:column headerValue="{!$Label.ARIA_PAYMENT_CREDIT_REASON}" width="20%" headerClass="headerlbl"  styleClass="lrow" />
                 
                 <apex:facet name="footer">{!$Label.ARIA_CREDIT_NO_HISTORY}</apex:facet>
              </apex:pageBlockTable>

        
     </apex:pageBlock> 
     <!--  Page block Section for recurring credits with paginator -->
     <apex:pageBlock id="ariaRecurringBlock" rendered="{!showRecCredits}" title="{!$Label.ARIA_PAYMENT_CREDIT_RECURRING_CREDIT_HISTORY}">
        <apex:outputPanel layout="block" style="background-color:hsl(195, 61%, 88%)">
            <ul>
               <li>{!$Label.ARIA_CREDIT_RECURRING_CREDITS}</li>
               <!-- <li>Click any Credits Generated value to see credits already generated from that recurring credit (SFDC Not Supporting).</li>-->
               <!-- <li>To disable any incomplete recurring credit, click its corresponding Del link (SFDC Not Supporting).</li>-->
           </ul>
        </apex:outputPanel>
        <div style="float:right">
	        <apex:outputLabel value="{!$Label.ARIA_PLAN_QUOTE_SUBSCRIPTIONS}" />&nbsp;&nbsp;&nbsp;&nbsp;
	        <apex:selectList value="{!selectedSubscriptionIdForCreditInfo}" size="1" onchange="refresh_creditInfoDetail()">
	            <apex:selectOptions value="{!subscriptionList}"/>
	        </apex:selectList>
        </div>
        <br /><br />
        <div class="paginator">
      <span class="left">
         <span onmouseout="ListPaginator.unhoverSelector(this)" onmouseover="ListPaginator.hoverSelector(this)" onmousedown="ListPaginator.showSelector('item_paginator_rpp_target')" id="item_paginator_rpp_target" class="selectorTarget">
            {!start}-{!ends} of {!totalRecords}
            <table cellspacing="0" cellpadding="0" id="item_paginator_rpp" class="selector rpp">
                <tbody>
                <tr onmousedown="setPageSize(10);" onmouseout="Sfdc.Dom.removeClass(this, 'optHover')" onmouseover="Sfdc.Dom.addClass(this, 'optHover')" class="opt {!IF(pageSize=10,'optSelected','optUnselected')}">
                    <td>{!$Label.ARIA_PAYMENT_REFUND_DISPLAY}</td>    <td class="rppOpt">10</td>  <td>{!$Label.ARIA_PAYMENT_CREDIT_RECORDS_PER_PAGE}</td>
                </tr>
                <tr onmousedown="setPageSize(25);" onmouseout="Sfdc.Dom.removeClass(this, 'optHover')" onmouseover="Sfdc.Dom.addClass(this, 'optHover')" class="opt {!IF(pageSize=25,'optSelected','optUnselected')}">
                    <td>{!$Label.ARIA_PAYMENT_REFUND_DISPLAY}</td>    <td class="rppOpt">25</td>  <td>{!$Label.ARIA_PAYMENT_CREDIT_RECORDS_PER_PAGE}</td>
                </tr>
                <tr onmousedown="setPageSize(50);" onmouseout="Sfdc.Dom.removeClass(this, 'optHover')" onmouseover="Sfdc.Dom.addClass(this, 'optHover')" class="opt {!IF(pageSize=50,'optSelected','optUnselected')}">
                    <td>{!$Label.ARIA_PAYMENT_REFUND_DISPLAY}</td><td class="rppOpt">50</td>  <td>{!$Label.ARIA_PAYMENT_CREDIT_RECORDS_PER_PAGE}</td>
                </tr>
                <tr onmousedown="setPageSize(100);" onmouseout="Sfdc.Dom.removeClass(this, 'optHover')" onmouseover="Sfdc.Dom.addClass(this, 'optHover')" class="opt {!IF(pageSize=100,'optSelected','optUnselected')}">
                    <td>{!$Label.ARIA_PAYMENT_REFUND_DISPLAY}</td>    <td class="rppOpt">100</td> <td>{!$Label.ARIA_PAYMENT_CREDIT_RECORDS_PER_PAGE}</td>
                </tr>
                
            </tbody>
          </table>
        <img src="/s.gif" class="selectArrow" />
       </span>
          
      </span>
      <span class="prevNextLinks">
        <span class="prevNext">
            <apex:outputPanel rendered="{!!previousButtonDisabled}">
            <a href="javascript:firstPage();">
                <img class="first" alt="{!$Label.ARIA_ACCOUNT_PLAN_SELECTION_FIRST_PAGE}" title="{!$Label.ARIA_ACCOUNT_PLAN_SELECTION_FIRST_PAGE}" src="/s.gif"/>
            </a>
            </apex:outputPanel>
            <apex:outputPanel rendered="{!previousButtonDisabled}">
            <img class="firstoff" src="/s.gif"/>
            </apex:outputPanel>
        </span>
        <span class="prevNext">
            <apex:outputPanel rendered="{!!previousButtonDisabled}">
            <a href="javascript:prePage();">
                <img class="prev" alt="{!$Label.ARIA_PAYMENT_CREDIT_PREVIOUS}" title="{!$Label.ARIA_PAYMENT_CREDIT_PREVIOUS}" src="/s.gif"/>{!$Label.ARIA_PAYMENT_CREDIT_PREVIOUS}
            </a>
            </apex:outputPanel>
            <apex:outputPanel rendered="{!previousButtonDisabled}">
            <img class="prevoff" src="/s.gif"/>{!$Label.ARIA_PAYMENT_CREDIT_PREVIOUS}
            </apex:outputPanel>
        </span>
        <span class="prevNext">
            <apex:outputPanel rendered="{!!nextButtonDisabled}">
            <a href="javascript:nextPage();">{!$Label.ARIA_PAYMENT_CREDIT_NEXT}
                <img class="next" alt="{!$Label.ARIA_PAYMENT_CREDIT_NEXT}" title="{!$Label.ARIA_PAYMENT_CREDIT_NEXT}" src="/s.gif"/>
            </a>
            </apex:outputPanel>
            <apex:outputPanel rendered="{!nextButtonDisabled}">
            {!$Label.ARIA_PAYMENT_CREDIT_NEXT}<img class="nextoff" src="/s.gif"/>
            </apex:outputPanel>
        </span>
        <span class="prevNext">
            <apex:outputPanel rendered="{!!nextButtonDisabled}">
            <a href="javascript:lastPage();">
                <img class="last" alt="{!$Label.ARIA_ACCOUNT_PLAN_SELECTION_LAST_PAGE}" title="{!$Label.ARIA_ACCOUNT_PLAN_SELECTION_LAST_PAGE}" src="/s.gif"/>
            </a>
            </apex:outputPanel>
            <apex:outputPanel rendered="{!nextButtonDisabled}">
            <img class="lastoff" src="/s.gif"/>
            </apex:outputPanel>
        </span>
     </span>
     <span class="right">{!$Label.ARIA_PAYMENT_REFUND_PAGE}&nbsp;{!PageNumber}&nbsp;{!$Label.ARIA_PAYMENT_CREDIT_OF}&nbsp;{!TotalPageNumber}
     <!--<input type="text" value="{!PageNumber}" onchange="jump(this.value);" maxlength="4" class="pageInput"/> of {!totalPageNumber}-->
     </span>
     </div>
             <apex:pageBlockTable columnClasses="crow" value="{!recCredits}" var="t" rendered="{!recCredits != null}">
                  <apex:column headerValue="Created" width="10%" value="{!t.create_date}" headerClass="headerlbl" />
                  <apex:column headerValue="Reason" headerClass="headerlbl" width="27%">
                    {!t.credit_reason_text}
                    &nbsp;<apex:commandLink style="text-decoration:none;background-color:#FACC2E;font-weight:bold; font-size:12px" value="?" onclick="return false;" rendered="{!t.comments!=''}" id="temp"  
                    onmouseout="hideTooltip('{!t.recurring_credit_no}_0')" 
                    onmouseover="showTooltip1('{!t.recurring_credit_no}_0','Comments from {!t.create_user}','{!t.comments}')"/>
                    <div class="toolTipWrapper" style="display:none" id="{!t.recurring_credit_no}_0"></div>
                  </apex:column>
                  <apex:column value="{!t.next_credit_date}" headerClass="headerlbl" width="10%">
                      <apex:facet name="header"><div style="float:left;"><apex:outputLabel escape="false" value="{!$Label.ARIA_CREDIT_NEXT_CREDIT_BREAK_DATE}"></apex:outputLabel></div></apex:facet>
                  </apex:column>
                  <apex:column headerValue="Status" width="25%" value="{!t.credit_status_label}" headerClass="headerlbl" /> 
                  
                  <apex:column style="text-align:right;"  headerClass="header" width="10%"  >
                      <apex:facet name="header"><div style="float:right;">{!$Label.ARIA_CREDIT_PER_CREDIT_AMOUNT}</div></apex:facet>
                      <apex:outputText value="{0, number, 0.00}"  style="text-align:right;" >
                       <apex:param value="{!t.credit_amount}" />
                      </apex:outputText>
                  </apex:column>
                  
                  <apex:column headerClass="headerlbl" width="8%"  > 
                    <apex:facet name="header"><div style="float:left;"> <apex:outputLabel escape="false" value="{!$Label.ARIA_CREDIT_GEN_APP_BREAK_RULES}"></apex:outputLabel></div></apex:facet>
                    <a id="a_{!t.recurring_credit_no}" href="javascript:;" onmouseout="hideTooltip('{!t.recurring_credit_no}')" 
                    onmouseover="showTooltip('{!t.recurring_credit_no}','Generation/Application Rules',{!t.credits_completed},{!t.credits_remaining},'{!t.first_credit_date}',{!t.credit_interval_months},'{!t.eligible_plan_name}','{!t.eligible_service_name}','{!t.service_name_to_apply}')">
                    {!$Label.ARIA_CREDIT_DETAILS}</a>
                    <div class="toolTipWrapper" style="display:none" id="{!t.recurring_credit_no}"></div>
                  </apex:column>
                  <apex:column headerClass="headerlbl" width="10%">
                    <!-- <apex:facet name="header"><div style="float:right;">Credits Gen'd<br/>/ Remaining</div></apex:facet> -->
                    <apex:facet name="header"><div style="float:right;"><apex:outputLabel escape="false" value="{!$Label.ARIA_CREDIT_GEN_REMAINING}"></apex:outputLabel></div></apex:facet>
                    {!FLOOR(t.credits_completed)} / {!FLOOR(t.credits_remaining)}
                  </apex:column>
              
              </apex:pageBlockTable>
              <!--  In case No records Found the below pageblock table will be rendered -->
              <apex:pageBlockTable value="{!recCredits}" var="t" rendered="{!recCredits.Size = 0}" footerClass="footerclass">
                 
                 <apex:column headerValue="{!$Label.ARIA_CREDIT_CREATED}" headerClass="headerlbl" styleClass="drow" width="12%"/>
                 <apex:column headerValue="{!$Label.ARIA_PAYMENT_CREDIT_REASON}" width="11%" headerClass="headerlbl" styleClass="crow" />
                 <apex:column headerValue="{!$Label.ARIA_CREDIT_NEXT_CREDIT_DATE}"  width="25%" headerClass="headerlbl" styleClass="crow" />
                 <apex:column headerValue="{!$Label.ARIA_ITEM_VIEW_STATUS}" width="12%" headerClass="headerlbl"  styleClass="drow" />
                 <apex:column headerValue="{!$Label.ARIA_CREDIT_PER_CREDIT_AMOUNT}"  width="20%" headerClass="headerlbl"  styleClass="lrow" />
                 <apex:column headerValue="{!$Label.ARIA_CREDIT_GEN_APP_RULES}" width="20%" headerClass="headerlbl"  styleClass="lrow" />
                 <apex:column headerValue="{!$Label.ARIA_CREDIT_CREDIT_GEN_REMAINING}" width="20%" headerClass="headerlbl"  styleClass="lrow" />
                 <apex:facet name="footer">{!$Label.ARIA_CREDIT_NO_RECURRING_CREDIT_HISTORY}</apex:facet>
                 
              </apex:pageBlockTable>

        
     </apex:pageBlock>
     
         <script>
         function showWhenToApplyBlock(value){
         		var objDiv = document.getElementById('chargeDiv');
         		var objDiv1 = document.getElementById('chargeDiv2');
                if(value == 'Against a specific type of charge'){
					objDiv1.style.display = "none";  
					objDiv.style.display="";             	
                }
                else if(value == 'Against a specific service type of charge'){
                	objDiv.style.display = "none";
                	objDiv1.style.display="";
                	uncheckAll();
                }
                else{
                	objDiv.style.display = "none";
                	objDiv1.style.display = "none";
                }
            }
         
         function uncheckAll(){
         		var checkboxs = document.getElementsByTagName("input"); 
				for (var i = 0; i < checkboxs.length; i++) {
				  if (checkboxs[i].type == "checkbox") {
				    checkboxs[i].checked = false;
				  }
				}
         
         }   
            
            function showBlock(divId,valueTomatch,value){
                var objDiv = document.getElementById(divId);
                if(valueTomatch==value){
                    objDiv.style.display="";
                }
                else{
                    objDiv.style.display = "none";
                }
            }
            function ToggleView(div1,div2){
                showBlock(div1,'','');   // show div
                showBlock(div2,'',' ');  // hide div
            }
            
            function showService(divId,value){
                var objDiv = document.getElementById(divId);
                if(value != ''){
                    refresh();
                }
                else{
                    objDiv.style.display = "none";
                }
            }
            if('{!creditType}'=='Service Credit'){ToggleView('pg:theForm:NewCredit:CreditSec','pg:theForm:NewCredit:CashSec');}
            else{ToggleView('pg:theForm:NewCredit:CashSec','pg:theForm:NewCredit:CreditSec');}
            addEvent(document.body,"mousedown",function(a){ListPaginator.hideSelector('item_paginator_rpp_target')},!0); 
        </script>
    
    </div>
 </div>
 </apex:form>
</apex:page>